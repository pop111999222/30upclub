<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>å²±çš„30å€’ç«‹</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" href="assets/30up.ico">
  <style>
    :root{
      --paper:#f5f6f2;
      --paper2:#eef0ea;
      --ink:#0a2444;
      --blue:#184c8a;      /* æµ·å ±è— */
      --red:#c6352a;       /* æµ·å ±ç´… */
      --muted:#42566f;
      --shadow: 0 18px 60px rgba(0,0,0,.22);
      --safeTop: env(safe-area-inset-top);
      --safeBot: env(safe-area-inset-bottom);
    }

    body{
      min-height:100vh;
      color:var(--ink);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(0,0,0,.04), transparent 60%),
        radial-gradient(900px 600px at 80% 30%, rgba(0,0,0,.03), transparent 60%),
        linear-gradient(0deg, rgba(24,76,138,.08) 1px, transparent 1px),
        linear-gradient(90deg, rgba(24,76,138,.08) 1px, transparent 1px),
        linear-gradient(180deg, var(--paper), var(--paper2));
      background-size: auto, auto, 18px 18px, 18px 18px, auto;
      overflow-x:hidden;
    }

    .hk-title{
      font-weight:900;
      letter-spacing:.06em;
      color:var(--blue);
      line-height:1.02;
      font-size: clamp(34px, 8.6vw, 46px);
      text-shadow: 0 2px 0 rgba(255,255,255,.65);
    }

    .muted{ color: rgba(10,36,68,.70); }

    .hk-poster{
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(24,76,138,.25);
      border-radius: 18px;
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .hk-poster::before{
      content:"";
      position:absolute; inset:10px;
      border: 2px solid rgba(24,76,138,.16);
      border-radius: 14px;
      pointer-events:none;
    }

    .hk-header{
      padding: 24px;
      display:flex;
      gap:12px;
      align-items:flex-start;
    }

    .hk-tag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(24,76,138,.25);
      background: rgba(255,255,255,.6);
      color:var(--blue);
      font-size:12px;
      font-weight:800;
      white-space:nowrap;
    }

    .hk-photo{
      margin: 0 24px;
      border-radius: 10px;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.18);
      background-color: #fff;
      height: 20vh;
      min-height: 260px;
      max-height: 420px;
      position:relative;
      isolation:isolate;
    }

    .hk-photo::after{
      content:"";
      position:absolute; inset:-20px;
      background-color: #fff;
      mix-blend-mode: overlay;
      opacity:.35;
      pointer-events:none;
      z-index: 1;
      background-color: transparent;
      display:none;
    }

    /* âœ… ç–Šå°åœ–ç‰‡ï¼ˆå–ä»£åŸæœ¬ hk-overprint æ–‡å­—ï¼‰ */
    .hk-overprint-img{
      position:absolute;
      top: 50%;
      left: 50%;
      z-index: 2;
      transform: translate(-50%, -50%);
      

      width: 100%;
      max-width: 400px;
      height: auto;
      mix-blend-mode: normal;
      
      mix-blend-mode: multiply;     /* å°åˆ·ç–Šè‰²æ„Ÿ */
      filter: saturate(.95) contrast(1.05);

      user-select:none;
      pointer-events:none;
    }

    .hk-body{
      padding: 0 24px;
      color: rgba(10,36,68,.88);
      line-height:1.75;
      font-size: 16px;
      white-space: pre-line;
    }

    .hk-body .leadline{
      font-weight:900;
      color: rgba(10,36,68,.92);
      
    }

    .hk-address{
      margin: 24px;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(24,76,138,.18);
      background:
        linear-gradient(90deg,
          rgba(24,76,138,.12) 0 10%,
          rgba(198,53,42,.10) 10% 20%,
          rgba(24,76,138,.12) 20% 30%,
          rgba(198,53,42,.10) 30% 40%,
          rgba(24,76,138,.12) 40% 50%,
          rgba(198,53,42,.10) 50% 60%,
          rgba(24,76,138,.12) 60% 70%,
          rgba(198,53,42,.10) 70% 80%,
          rgba(24,76,138,.12) 80% 90%,
          rgba(198,53,42,.10) 90% 100%
        );
      color: rgba(24,76,138,.95);
      font-weight:900;
      letter-spacing:.04em;
      font-size: clamp(14px, 3.8vw, 20px);
    }

    .btn-hk{
      border-radius: 14px !important;
      border: 1px solid rgba(24,76,138,.28) !important;
      background: rgba(255,255,255,.72) !important;
      color: var(--blue) !important;
      font-weight:900 !important;
      box-shadow: 0 12px 26px rgba(0,0,0,.10);
    }
    .btn-hk:active{ transform: scale(.99); }

    .btn-hk-outline{
      border-radius: 14px !important;
      border: 1px solid rgba(24,76,138,.28) !important;
      background: rgba(255,255,255,.0) !important;
      color: rgba(24,76,138,.95) !important;
      font-weight:900 !important;
    }

    .page{ display:none; animation: fadeUp .25s ease both; }
    .page.active{ display:block; }
    @keyframes fadeUp{
      from{ opacity:0; transform: translateY(8px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .dock{
      position: sticky;
      bottom: 0;
      padding-bottom: calc(12px + var(--safeBot));
      background: rgba(245,246,242,.82);
      backdrop-filter: blur(10px);
      border-top: 1px solid rgba(24,76,138,.18);
      z-index: 10;
    }

    .progress{
      height: 12px;
      background: rgba(24,76,138,.10);
      border: 1px solid rgba(24,76,138,.18);
      border-radius: 999px;
      overflow:hidden;
    }
    .progress-bar{
      background: linear-gradient(90deg, rgba(24,76,138,.95), rgba(198,53,42,.85));
    }

    .outage *{ filter: grayscale(.12) brightness(.88); }
    .outage .hk-photo::after{ opacity:.18; }
  </style>
</head>

<body>
  <div class="container pt-3" style="padding-top: calc(12px + var(--safeTop));">

    <div class="d-flex align-items-start justify-content-between gap-3 mb-3">
      <div>
        <div class="fw-black text-uppercase" style="letter-spacing:.18em; color: rgba(24,76,138,.85); font-weight:900; font-size:12px;">
          HAHAHA B Day MAP
        </div>
        <div class="muted" style="font-size:12px;" id="subtitle">
          ä¸è®“æ‚¨å¥½éçš„ç”Ÿæ—¥å°‹å¯¶ï½œ5é å¾®å¾®äº’å‹•ï½œä¾åºè§£é–ç·šç´¢
        </div>
      </div>
      <div class="hk-tag" id="stepText">0 / 4</div>
    </div>

    <div id="pages">

      <!-- Page 1 -->
      <section class="page active" data-page="intro">
        <div class="hk-poster" id="poster1">
          <div class="hk-header">
            

            <div class="flex-grow-1">
              <div class="hk-title">ä¸‰åå€’ç«‹</div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="text-uppercase" style="letter-spacing:.18em; color:rgba(24,76,138,.70); font-weight:900; font-size:12px;">
                  HI!Y / MAP
                </div>
                <div class="hk-tag">PAGE 1 / 5</div>
              </div>
            </div>
          </div>

          <div class="hk-photo">
            <img class="hk-overprint-img" src="assets/overlay-1.png" alt="">
          </div>

          <div class="hk-body">
            <div class="leadline">é–‹å ´ç™½</div>
            <div id="introText"><span style='font-size:100px;'>&#128526;</span></div>
          </div>

          <div class="hk-address">
            æº«é¦¨æé†’ï¼šå°å¿ƒåˆ¥æ’åˆ°é ­å˜¿ï½
          </div>
        </div>

        <div class="mt-3">
          <button class="btn btn-hk w-100 py-3" id="startBtn">é–‹å§‹å°‹æ‰¾ ğŸ‘‰</button>
        </div>
      </section>

      <!-- Page 2 -->
      <section class="page" data-page="clue1">
        <div class="hk-poster" id="poster2">
          <div class="hk-header">
            
            <div class="flex-grow-1">
              <div class="hk-title">ç¬¬ä¸€ç·šç´¢</div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="text-uppercase" style="letter-spacing:.18em; color:rgba(24,76,138,.70); font-weight:900; font-size:12px;">
                  ä»¥ä¸‹æç¤º / CLUE 01
                </div>
                <div class="hk-tag">PAGE 2 / 5</div>
              </div>
            </div>
          </div>

          <div class="hk-photo">
            <img class="hk-overprint-img" src="assets/overlay-2.png" alt="">
          </div>

          <div class="hk-body">
            <div class="leadline">é—œæ–¼ã€Œä½ç½®ã€ğŸ“</div>
            <div id="clue1Text"></div>
          </div>

          <div class="hk-address">
            address: look down / under your daily view
          </div>
        </div>

        <div class="mt-3 d-grid gap-2">
          <button class="btn btn-hk py-3" id="found1Btn">ä¸‹ä¸€æ­¥ ğŸ‘‰</button>
          <button class="btn btn-hk-outline py-2" id="backToIntroBtn">ğŸ‘ˆ å›é–‹å ´</button>
        </div>
      </section>

      <!-- Page 3 -->
      <section class="page" data-page="clue2">
        <div class="hk-poster" id="poster3">
          <div class="hk-header">
            

            <div class="flex-grow-1">
              <div class="hk-title">ç¬¬äºŒç·šç´¢</div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="text-uppercase" style="letter-spacing:.18em; color:rgba(24,76,138,.70); font-weight:900; font-size:12px;">
                  ä»¥ä¸‹æç¤º / CLUE 02
                </div>
                <div class="hk-tag">PAGE 3 / 5</div>
              </div>
            </div>
          </div>

          <div class="hk-photo">
            <img class="hk-overprint-img" src="assets/overlay-3.png" alt="">
          </div>

          <div class="hk-body">
            <div class="leadline">é—œæ–¼ã€Œæ–¹å‘ã€â¡ï¸</div>
            <div id="clue2Text"></div>
          </div>

          <div class="hk-address">
            address: slow down / then youâ€™ll see
          </div>
        </div>

        <div class="mt-3 d-grid gap-2">
          <button class="btn btn-hk py-3" id="found2Btn">ä¸‹ä¸€æ­¥ ğŸ‘‰</button>
          <button class="btn btn-hk-outline py-2" id="back1Btn">ğŸ‘ˆ å›ç·šç´¢ä¸€</button>
        </div>
      </section>

      <!-- Page 4 -->
      <section class="page" data-page="clue3">
        <div class="hk-poster" id="poster4">
          <div class="hk-header">
            

            <div class="flex-grow-1">
              <div class="hk-title">ç¬¬ä¸‰ç·šç´¢</div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="text-uppercase" style="letter-spacing:.18em; color:rgba(24,76,138,.70); font-weight:900; font-size:12px;">
                  ä»¥ä¸‹æç¤º / CLUE 03
                </div>
                <div class="hk-tag">PAGE 4 / 5</div>
              </div>
            </div>
          </div>

          <div class="hk-photo">
            <img class="hk-overprint-img" src="assets/overlay-4.png" alt="">
          </div>

          <div class="hk-body">
            <div class="leadline">é—œæ–¼ã€Œè§€å¯Ÿã€ğŸ‘€</div>
            <div id="clue3Text"></div>
          </div>

          <div class="hk-address">
            address: look again / one more glance
          </div>
        </div>

        <div class="mt-3 d-grid gap-2">
          <button class="btn btn-hk py-3" id="found3Btn">ä¸‹ä¸€æ­¥ ğŸ‘‰</button>
          <button class="btn btn-hk-outline py-2" id="back2Btn">ğŸ‘ˆ å›ç·šç´¢äºŒ</button>
        </div>
      </section>

      <!-- Page 5 -->
      <section class="page" data-page="final">
        <div class="hk-poster" id="poster5">
          <div class="hk-header">
            

            <div class="flex-grow-1">
              <div class="hk-title">çµ‚é»</div>
              <div class="d-flex justify-content-between align-items-center mt-2">
                <div class="text-uppercase" style="letter-spacing:.18em; color:rgba(24,76,138,.70); font-weight:900; font-size:12px;">
                  HAPPY BIRTHDAY / FINAL
                </div>
                <div class="hk-tag">PAGE 5 / 5</div>
              </div>
            </div>
          </div>

          <div class="hk-photo">
            <img class="hk-overprint-img" src="assets/overlay-5.png" alt="">
          </div>

          <div class="hk-body">
            <div class="leadline">ğŸ‰æ­å–œæ‚¨æ‰¾åˆ°ğŸ‰</div>
            <div id="finalText"></div>
          </div>

          <div class="hk-address">
            address: keep this page / keep this wish
          </div>
        </div>

        <div class="mt-3 d-grid gap-2">
          <button class="btn btn-hk py-3" id="resetBtn">é‡ç©ä¸€æ¬¡ï¼ˆé‡ç½®é€²åº¦ï¼‰</button>
      
        </div>
      </section>

    </div>
  </div>

  <div class="dock mt-3">
    <div class="container py-3">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div class="muted" style="font-size:12px;" id="progressLabel">é€²åº¦</div>
        <div class="muted" style="font-size:12px;" id="progressPct">0%</div>
      </div>
      <div class="progress">
        <div class="progress-bar" id="bar" style="width:0%"></div>
      </div>
      <div class="mt-2 d-flex justify-content-between">
        <div class="muted" style="font-size:12px;">æç¤ºï¼šé€²åº¦æœƒè¨˜ä½ï¼ˆåŒä¸€å°æ‰‹æ©Ÿï¼‰</div>
        <div class="muted" style="font-size:12px;">é•·æŒ‰æµ·å ±ï¼šåœé›»æ¨¡å¼</div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

  <script>
    // ====== ä½ åªè¦æ”¹é€™è£¡ï¼ˆæ–‡å­—/åå­—/å¹´é½¡ï¼‰ ======
    const CONFIG = {
      personName: "å²±",    // â† æ”¹æˆæœ‹å‹åå­—/æš±ç¨±
      age: 30,             // â† å¦‚æœä¸æ˜¯ 30 æ”¹é€™è£¡

      intro:
`ä½ æ‰¾åˆ°äº†ä¸€å¼µä¸éœ€è¦ç§»å‹•çš„è—å¯¶åœ–ï¼ˆæŠ±æ­‰æˆ‘æ²’æ›´å¥½çš„ç”¨è©äº†ï¼‰ã€‚

å®ƒä¸åœ¨åœ°ä¸Šï¼Œä¸åœ¨æŠ½å±œè£¡ï¼Œè€Œæ˜¯åœ¨ä½ æ¯å¤©ç¶“éã€å»ä¸ä¸€å®šæœƒæ³¨æ„çš„åœ°æ–¹ã€‚

æœ‰ä¸‰å€‹ç·šç´¢ï¼Œä¸ç”¨å¿«ï¼Œåªè¦ä»”ç´°ï¼Œä¿ºå°æ‚¨çš„ç´°å¿ƒéå¸¸æœ‰è‡ªä¿¡ã€‚`,

      clue1:
`æŠ¬é ­æ‰¾ä¸åˆ°çš„ï¼Œä¸åœ¨æŠ½å±œã€é›»è…¦æ¶ã€æ–‡ä»¶å †ï¼Œæ›´ä¸å¯èƒ½åœ¨å±è‚¡åº•ä¸‹
ä½†å°±åœ¨ä½ ä½é ­å½è…°æ™‚å‡ºç¾ã€‚

è©¦è‘—çœ‹çœ‹ï¼š
ä½ æ¯å¤©å·¥ä½œæ™‚ 8å°æ™‚ ç›¯è‘—çš„æ±è¥¿ï¼Œè¦–ç·šæ­£ä¸‹æ–¹çš„åœ°æ–¹ã€‚`,

      clue2:
`æ­å–œä½ æ²’æœ‰è¿·è·¯ï¼Œä½†è¿·è·¯é€™ä»¶äº‹æ„Ÿè¦ºä¸æœƒç™¼ç”Ÿåœ¨ä½ èº«ä¸Šï½ã€‚

æ‰¾æ‰¾çœ‹ï¼š
é‚£å€‹è®“ä½ é¡˜æ„å³ä½¿å¾ˆå¿™å¾ˆèºä¹Ÿè¦å†’è‘—è‚¡ç›†å‰å‚¾é¢¨éšªç¿¹è…³ä¸Šç­ï¼Œè†è“‹é‚„æœƒé ‚åˆ°çš„åœ°æ–¹ã€‚
ï¼ˆä¸æ˜¯é ‚åˆ°è‚ºï¼ä¹Ÿä¸æ˜¯é ‚äººï¼æ›´ä¸æ˜¯é ‚çƒï¼è¬è¬ï¼‰`,

      clue3:
`æ‰¾åˆ°äº†æ²’~å£½æ˜Ÿ

å¦‚æœä½ å·²ç¶“çœ‹åˆ°å®ƒäº†ï¼Œé‚£ä½ æº–å‚™å¥½æ‰“é–‹æœ€å¾Œä¸€é äº†ã€‚
æ‰¾ä¸åˆ°è«‹è©¢å•æ‚¨åº§ä½å³æ‰‹é‚Š"è±"æˆ–è«‹æ´½è¨­è¨ˆçµ„"æ–¹ä»™å¥³"ã€‚`,

      final: (name, age) =>
`${age} æ­²ç”Ÿæ—¥å¿«æ¨‚ï¼Œ${name}ã€‚

Hmmm å…¶å¯¦æˆ‘æ–‡ç­†ä¸å¥½ç¢ºå¯¦å¯«ä¸å‡ºä»€éº¼åƒæ¨£æ¼‚æ¼‚çš„ç¥ç¦
é™¤äº†å¾ˆé«˜èˆˆèƒ½èªè­˜ä½ ï¼Œé›–ç„¶æ²’çœŸæ­£å…±è­˜éä½†ä½ ç¸½æ˜¯å¯ä»¥ä¿æŒå†·éœï¼‹ç†æ€§ç„¶å¾Œæ™‚ä¸æ™‚ä¾†ä¸€å¥çªç ´é‚è¼¯ç›²è…¸çš„è§£ç­”ï¼Œå¹«å¤§å®¶è§£æƒ‘ï¼Œé‚„æœ‰å‡ºå…¶ä¸æ„çš„é€Ÿé€Ÿå¹½é»˜åæ‡‰é€™å€‹è¶…è®šï½
æ¥ä¸‹ä¾†ä¸å…ä¿—è¦ä¾†é»å®˜æ–¹ç”Ÿæ—¥ç¥è³€ï¼š
å¸Œæœ›æ¥ä¸‹ä¾†çš„æ¯ä¸€å¤©ä¸ç®¡æ˜¯å·¥ä½œã€ç”Ÿæ´»ã€æ‘¸ç‰Œæˆ–æ˜¯å¥åº·éƒ½å¯ä»¥é †åˆ© ï¼† é–‹å¿ƒï¼ˆå·¥ä½œéƒ¨åˆ†åªèƒ½è·Ÿå®‡å®™ä¸‹è¨‚å–®å¸Œæœ›æ°£å€™è®Šé·ä¸‹ cash å•¦ï¼‰
30 æ­²æ²’é”åˆ°åƒç´ ç›®æ¨™æ²’é—œä¿‚ï½é‚„æœ‰ 31ã€2ã€3 æ­²ä¾†é”æˆç›®æ¨™ï¼ŒåŠ æ²¹ï¼

ä¹Ÿè¬è¬ä½ ä¸€ç›´ä»¥ä¾†æ¥ä½æˆ‘éš¨æ©Ÿä¸å®šæ™‚ç•«å‡ºä¾†çš„å°åœ–ï¼ŒåŸæœ¬åªæ˜¯è¦é¬§ä½ è²¼å€‹ä¾¿æ¢åœ¨ä½ ç­†é›»ä¸Šï¼Œæƒ³èªªéš”å¤©æ‡‰è©²æ˜¯æœƒè¢«ç™½çœ¼è½‰ç§»åƒåœ¾æ¡¶ä¹‹é¡çš„ï¼Œæ²’æƒ³åˆ°å±…ç„¶æ”¶ä¸‹ï¼ˆé˜¿å§¨ç²‰æ„Ÿå‹•ï¼‰

æœ€å¾Œæ„Ÿè¬ä½ é™ªæˆ‘ç©é€™éŠæˆ²ï¼Œç¬¬ä¸€æ¬¡æŠŠé€™æƒ³æ³•åšå‡ºä¾†å¯¦éš›æ“ä½œï¼Œè«‹å¤šè¦‹è«’ï¼Œé›–ç„¶æ˜¯ç”¨ Ai ç”¢ code çš„æˆ‘åªè² è²¬ä¿®æ”¹æ¨£å¼......å•¦
ç„¶å¾Œå¸Œæœ›ä½ æœƒå–œæ­¡ä½ æ‰¾åˆ°çš„......å—¯"å¯¶è— ? ç¦®ç‰© ?"(è«‹æ•‘æ•‘æˆ‘ä¸­æ–‡è©å½™é‡)ï¼ŒæœŸå¾…å¯ä»¥åœ¨æˆ‘æœ‰ç”Ÿä¹‹å¹´æˆåè®“ä½ èƒ½æ‹¿å»è®Šç¾ï¼Œæˆ‘è¦åˆ†ä¸€æ¯ç¾¹(é–‹ç©ç¬‘çš„~)

å¥½å•¦æœ€å¾Œçš„æœ€å¾Œé‚„æ˜¯è¦èªª ç”Ÿ æ—¥ å¿« æ¨‚ã€‚
By é›¨ç”°é˜¿å§¨`
    };

    (function(){
      const $ = (sel) => document.querySelector(sel);
      const pages = [...document.querySelectorAll(".page")];

      $("#introText").textContent = CONFIG.intro;
      $("#clue1Text").textContent = CONFIG.clue1;
      $("#clue2Text").textContent = CONFIG.clue2;
      $("#clue3Text").textContent = CONFIG.clue3;
      $("#finalText").textContent = CONFIG.final(CONFIG.personName, CONFIG.age);

      const stepText = $("#stepText");
      const progressPct = $("#progressPct");
      const bar = $("#bar");
      const progressLabel = $("#progressLabel");

      const STORAGE_KEY = "hk_neon_treasure_step_v2";
      let state = { step: 0 };

      const load = () => {
        try{
          const v = JSON.parse(localStorage.getItem(STORAGE_KEY) || "{}");
          if (typeof v.step === "number") state.step = Math.max(0, Math.min(4, v.step));
        }catch{}
      };
      const save = () => localStorage.setItem(STORAGE_KEY, JSON.stringify(state));

      const vibrate = (p) => { if (navigator.vibrate) navigator.vibrate(p); };

      const showPage = (name) => {
        pages.forEach(p => p.classList.toggle("active", p.dataset.page === name));
        window.scrollTo({ top: 0, behavior: "smooth" });
      };

      const stepToPage = (step) => {
        if (step <= 0) return "intro";
        if (step === 1) return "clue1";
        if (step === 2) return "clue2";
        if (step === 3) return "clue3";
        return "final";
      };

      const updateProgress = () => {
        const pct = Math.round((state.step / 4) * 100);
        bar.style.width = pct + "%";
        progressPct.textContent = pct + "%";
        progressLabel.textContent = pct === 100 ? "å®Œæˆ" : "é€²åº¦";
        stepText.textContent = `${state.step} / 4`;
      };

      const goStep = (step) => {
        state.step = Math.max(0, Math.min(4, step));
        save();
        updateProgress();
        showPage(stepToPage(state.step));
      };

      $("#startBtn").addEventListener("click", () => { vibrate(12); goStep(1); });
      $("#found1Btn").addEventListener("click", () => { vibrate([10,30,10]); goStep(2); });
      $("#found2Btn").addEventListener("click", () => { vibrate([10,30,10]); goStep(3); });
      $("#found3Btn").addEventListener("click", () => { vibrate([10,30,10]); goStep(4); });

      $("#backToIntroBtn").addEventListener("click", () => { vibrate(8); goStep(0); });
      $("#back1Btn").addEventListener("click", () => { vibrate(8); goStep(1); });
      $("#back2Btn").addEventListener("click", () => { vibrate(8); goStep(2); });

      $("#resetBtn").addEventListener("click", () => {
        if (!confirm("ç¢ºå®šè¦é‡ç½®é€²åº¦ï¼Œé‡æ–°å°‹å¯¶å—ï¼Ÿ")) return;
        vibrate(20);
        goStep(0);
      });

      $("#shareHintBtn").addEventListener("click", async () => {
        const text = $("#finalText").textContent || "";
        try{
          await navigator.clipboard.writeText(text);
          vibrate(15);
          alert("ç¥ç¦æ–‡å­—å·²è¤‡è£½ âœ“");
        }catch{
          alert("ç„¡æ³•è‡ªå‹•è¤‡è£½ï¼Œè«‹æ‰‹å‹•é¸å–è¤‡è£½ã€‚");
        }
      });

      // long press poster to toggle outage mode
      let pressTimer = null;
      const toggleOutage = () => {
        document.documentElement.classList.toggle("outage");
        vibrate([20, 40, 20]);
      };

      document.querySelectorAll(".hk-poster").forEach(card => {
        card.addEventListener("touchstart", () => {
          pressTimer = setTimeout(toggleOutage, 520);
        }, {passive:true});
        card.addEventListener("touchend", () => {
          if (pressTimer) clearTimeout(pressTimer);
          pressTimer = null;
        }, {passive:true});
        card.addEventListener("touchmove", () => {
          if (pressTimer) clearTimeout(pressTimer);
          pressTimer = null;
        }, {passive:true});
      });

      load();
      updateProgress();
      showPage(stepToPage(state.step));
    })();
  </script>
</body>
</html>
